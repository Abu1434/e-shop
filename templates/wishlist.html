{% extends 'layouts/base.html' %}

{% load static %}

{% block extra_css %}
    <style>
        :root {
            /* Transition */
            --transition-speed: 0.3s;

            /* Male Design - Default */
            --primary-color: #3f51b5;
            --secondary-color: #64b5f6;
            --accent-color: #ffb74d;
            --background-color: #ffffff;
            --card-background: #f8f9fa;
            --text-color: #333333;
            --text-light: #6c757d;
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.05);
        }

        /* Female Design */
        [data-gender="female"] {
            --primary-color: #e91e63;
            --secondary-color: #f48fb1;
            --accent-color: #ce93d8;
            --background-color: #fff9fa;
            --card-background: #fef5f7;
            --text-color: #4a4a4a;
            --text-light: #7d7d7d;
            --border-color: #f0d4db;
            --shadow-color: rgba(233, 30, 99, 0.05);
        }

        /* Dark Mode - Male */
        [data-theme="dark"] {
            --primary-color: #5c6bc0;
            --secondary-color: #81d4fa;
            --accent-color: #ffcc80;
            --background-color: #121212;
            --card-background: #1e1e1e;
            --text-color: #f5f5f5;
            --text-light: #adb5bd;
            --border-color: #2d2d2d;
            --shadow-color: rgba(0, 0, 0, 0.2);
        }

        /* Dark Mode - Female */
        [data-theme="dark"][data-gender="female"] {
            --primary-color: #f06292;
            --secondary-color: #f8bbd0;
            --accent-color: #d1c4e9;
            --background-color: #1a1617;
            --card-background: #261e21;
            --text-color: #f5f5f5;
            --text-light: #bdbdbd;
            --border-color: #3d2d33;
            --shadow-color: rgba(240, 98, 146, 0.1);
        }
    </style>
{% endblock %}

{% block content %}
    <!-- Wishlist Section -->
    <section class="section">
        <div class="container">
            <h1 style="font-size: 2rem; margin-bottom: 30px">My Wishlist</h1>

            <div class="wishlist-items">

                <!-- Wishlist Item 1 -->
                {% for product in products %}
                    <div class="wishlist-item" style="
          display: grid;
          grid-template-columns: 100px 1fr auto;
          gap: 20px;
          align-items: center;
          padding: 20px;
          background-color: var(--card-background);
          border-radius: 10px;
          box-shadow: 0 5px 15px var(--shadow-color);
          margin-bottom: 20px;
        ">
                        <div class="item-image" style="
            width: 100px;
            height: 100px;
            border-radius: 5px;
            overflow: hidden;
          ">
                            <img src="{{ product.image.url }}" alt="Interactive Robot"
                                 style="width: 100%; height: 100%; object-fit: cover"/>
                        </div>
                        <div class="item-details">
                            <h3 style="margin-bottom: 5px">{{ product.name }}</h3>
                            <p style="color: var(--text-light); margin-bottom: 10px">
                                {{ product.short_description }}
                            </p>
                            <div style="font-weight: 600; color: var(--primary-color)">
                                ${{ product.get_price }}
                            </div>
                        </div>
                        <div class="item-actions" style="display: flex; flex-direction: column; gap: 10px">
                            <button class="btn btn-primary" style="white-space: nowrap">
                                Add to Cart
                            </button>
                            <button class="btn btn-outline" style="white-space: nowrap">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                {% endfor %}



                <!-- Empty Wishlist (hidden by default) -->
                <div class="empty-wishlist" style="
        text-align: center;
        padding: 50px 20px;
        background-color: var(--card-background);
        border-radius: 10px;
        box-shadow: 0 5px 15px var(--shadow-color);
        display: none;
      ">
                    <i class="far fa-heart" style="font-size: 4rem; color: var(--text-light); margin-bottom: 20px"></i>
                    <h2 style="margin-bottom: 10px">Your wishlist is empty</h2>
                    <p style="color: var(--text-light); margin-bottom: 20px">
                        Browse our shop and add items you love to your wishlist.
                    </p>
                    <a href="shop.html" class="btn btn-primary">Continue Shopping</a>
                </div>

                <!-- Actions -->
                <div style="display: flex; justify-content: space-between; margin-top: 30px">
                    <a href="shop.html" class="btn btn-outline">
                        <i class="fas fa-arrow-left"></i> Continue Shopping
                    </a>
                    <button class="btn btn-primary">Add All to Cart</button>
                </div>
            </div>
    </section>

    <!-- Recommended Products -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">You Might Also Like</h2>
            <div class="product-grid">
                <!-- Product 1 -->
                <div class="card">
                    <img src="/placeholder.svg?height=200&width=300" alt="Wooden Puzzle" class="card-img"/>
                    <div class="card-body">
                        <h3 class="card-title">Wooden Puzzle</h3>
                        <p class="card-text">Educational wooden puzzle set.</p>
                        <div class="card-price">$16.99</div>
                        <div style="display: flex; gap: 10px">
                            <a href="product-details.html" class="btn btn-outline" style="flex: 1">View</a>
                            <button class="btn btn-primary" style="flex: 1">Add to Cart</button>
                        </div>
                    </div>
                </div>

                <!-- Product 2 -->
                <div class="card">
                    <img src="/placeholder.svg?height=200&width=300" alt="Art Set" class="card-img"/>
                    <div class="card-body">
                        <h3 class="card-title">Children's Art Set</h3>
                        <p class="card-text">Complete art set for creative kids.</p>
                        <div class="card-price">$22.99</div>
                        <div style="display: flex; gap: 10px">
                            <a href="product-details.html" class="btn btn-outline" style="flex: 1">View</a>
                            <button class="btn btn-primary" style="flex: 1">Add to Cart</button>
                        </div>
                    </div>
                </div>

                <!-- Product 3 -->
                <div class="card">
                    <img src="/placeholder.svg?height=200&width=300" alt="Remote Control Car" class="card-img"/>
                    <div class="card-body">
                        <h3 class="card-title">RC Smart Car</h3>
                        <p class="card-text">Programmable remote control car.</p>
                        <div class="card-price">$39.99</div>
                        <div style="display: flex; gap: 10px">
                            <a href="product-details.html" class="btn btn-outline" style="flex: 1">View</a>
                            <button class="btn btn-primary" style="flex: 1">Add to Cart</button>
                        </div>
                    </div>
                </div>

                <!-- Product 4 -->
                <div class="card">
                    <img src="/placeholder.svg?height=200&width=300" alt="Plush Teddy" class="card-img"/>
                    <div class="card-body">
                        <h3 class="card-title">Soft Plush Teddy</h3>
                        <p class="card-text">Super soft teddy bear for cuddling.</p>
                        <div class="card-price">$14.99</div>
                        <div style="display: flex; gap: 10px">
                            <a href="product-details.html" class="btn btn-outline" style="flex: 1">View</a>
                            <button class="btn btn-primary" style="flex: 1">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %} {% block extra_js %}
    <script>
        // Load navbar and footer
        fetch("navbar.html")
            .then((response) => response.text())
            .then((data) => {
                const parser = new DOMParser();
                const navbarDoc = parser.parseFromString(data, "text/html");
                const navbarContent = navbarDoc.querySelector(".navbar");
                document.getElementById("navbar-placeholder").appendChild(navbarContent);

                // Execute navbar scripts
                const scripts = navbarDoc.querySelectorAll("script");
                scripts.forEach((script) => {
                    const newScript = document.createElement("script");
                    if (script.src) {
                        newScript.src = script.src;
                    } else {
                        newScript.textContent = script.textContent;
                    }
                    document.body.appendChild(newScript);
                });
            });

        fetch("footer.html")
            .then((response) => response.text())
            .then((data) => {
                const parser = new DOMParser();
                const footerDoc = parser.parseFromString(data, "text/html");
                const footerContent = footerDoc.querySelector(".footer");
                document.getElementById("footer-placeholder").appendChild(footerContent);
            });

        // Remove item functionality
        const removeButtons = document.querySelectorAll(".item-actions .btn-outline");
        removeButtons.forEach((button) => {
            button.addEventListener("click", () => {
                const wishlistItem = button.closest(".wishlist-item");
                wishlistItem.style.opacity = "0";
                setTimeout(() => {
                    wishlistItem.remove();

                    // Check if wishlist is empty
                    const remainingItems = document.querySelectorAll(".wishlist-item");
                    if (remainingItems.length === 0) {
                        document.querySelector(".wishlist-items").style.display = "none";
                        document.querySelector(".empty-wishlist").style.display = "block";
                        document.querySelector(".section").lastElementChild.style.display =
                            "none";
                    }
                }, 300);
            });
        });
    </script>
{% endblock %}
